#!/bin/bash

# Function to display a notification box
notify_user() {
    local tool=$1
    local website=$2
    echo "---------------------------------------------------"
    echo "Error: Unable to locate package for $tool."
    echo "Please visit the following site for installation instructions:"
    echo "$website"
    echo "---------------------------------------------------"
}

# Array of tools with their installation sites
declare -A tools_sites=(
    [dockerfile-linter]="https://github.com/DockerfileLint/dockerfile-linter"
    [falco]="https://github.com/falcosecurity/falco"
    [jok3r]="https://github.com/DonaldWhyte/jok3r"
    [synk]="https://github.com/synk/synk"
    [openscap]="https://www.open-scap.org/"
    [uniscan]="https://github.com/Uniscan/uniscan"
)

# Function to install a tool
install_tool() {
    local tool=$1
    local install_cmd=$2
    echo "$tool is not installed."
    read -p "Do you want to install $tool? (y/n): " response
    response=$(echo "$response" | tr '[:upper:]' '[:lower:]') # Convert to lowercase
    if [ "$response" == "y" ]; then
        echo "Installing $tool..."
        if ! $install_cmd 2>&1 | tee /tmp/install_log | grep -q "E: Unable to locate package"; then
            echo "$tool installed successfully."
        else
            notify_user "$tool" "${tools_sites[$tool]}"
        fi
    else
        echo "$tool installation skipped."
    fi
}

# Example usage
install_tool "dockerfile-linter" "sudo apt-get install dockerfile-linter"
install_tool "falco" "sudo apt-get install falco"
install_tool "jok3r" "sudo apt-get install jok3r"
install_tool "synk" "sudo apt-get install synk"
install_tool "openscap" "sudo apt-get install openscap"
install_tool "uniscan" "sudo apt-get install uniscan"
