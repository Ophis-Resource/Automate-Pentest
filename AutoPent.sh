#!/bin/bash

# Function to show a progress bar
show_progress() {
  local duration=${1}
  local bar="##################################################"
  local n=0
  while [ ${n} -lt ${duration} ]; do
    local i=$((n * 50 / duration))
    echo -ne "\r[${bar:0:i}${bar:i}]"
    sleep 1
    n=$((n + 1))
  done
  echo
}

# Ask for URL or IP address
read -p "Enter the URL or IP address to scan: " target

# Perform Reconnaissance with nmap
echo "Performing Reconnaissance with nmap..."
show_progress 5
nmap -sV -oN nmap_scan.txt $target

# Perform Web Vulnerability Scanning with nikto
echo "Performing Web Vulnerability Scanning with nikto..."
show_progress 5
nikto -h $target -o nikto_scan.txt

# Exploitation with Metasploit (optional and simplified)
echo "Running Metasploit auxiliary scanner..."
show_progress 5
msfconsole -q -x "use auxiliary/scanner/http/http_version; set RHOSTS $target; run; exit;" | tee metasploit_scan.txt

# Combine results into a report
echo "Combining results into report..."
show_progress 3
cat nmap_scan.txt nikto_scan.txt metasploit_scan.txt > final_report.txt

echo "Scan complete. Results saved in final_report.txt"
